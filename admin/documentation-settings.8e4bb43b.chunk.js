"use strict";(self.webpackChunkbackend=self.webpackChunkbackend||[]).push([[8503],{31346:(B,y,t)=>{t.r(y),t.d(y,{default:()=>j});var e=t(67294),h=t(97132),l=t(80831),p=t(68547),m=t(67838),A=t(49066),T=t(185),S=t(29728),x=t(35961),C=t(7681),L=t(72735),u=t(20707),a=t(16364),i=t(11276),d=t(74571),c=t(8934),O=t(94123),D=t(85018),P=t(80826),g=t(93742),v=t(4733),M=t(27821),n=t(25752);const s=(0,M.default)(n.E)`
  svg {
    height: 1rem;
    width: 1rem;
    path {
      fill: ${({theme:f})=>f.colors.neutral600};
    }
  }
`;var r=t(53209);const b=r.Ry().shape({restrictedAccess:r.O7(),password:r.Z_().when("restrictedAccess",(f,I)=>f?I.required(p.translatedErrors.required):I)}),j=()=>{(0,p.useFocusWhenNavigate)();const{formatMessage:f}=(0,h.useIntl)(),{submitMutation:I,data:w,isLoading:W}=(0,v.Z)(),[U,H]=(0,e.useState)(!1),Q=K=>{I.mutate({prefix:w==null?void 0:w.prefix,body:K})};return e.createElement(T.o,null,W?e.createElement(p.LoadingIndicatorPage,null,"Plugin settings are loading"):e.createElement(l.Formik,{initialValues:{restrictedAccess:(w==null?void 0:w.documentationAccess.restrictedAccess)||!1,password:""},onSubmit:Q,validationSchema:b},({handleSubmit:K,values:Z,handleChange:z,errors:$,setFieldTouched:N,setFieldValue:F})=>e.createElement(p.Form,{noValidate:!0,onSubmit:K},e.createElement(m.T,{title:f({id:(0,g.O)("plugin.name"),defaultMessage:"Documentation"}),subtitle:f({id:(0,g.O)("pages.SettingsPage.header.description"),defaultMessage:"Configure the documentation plugin"}),primaryAction:e.createElement(p.CheckPermissions,{permissions:P.Z.update},e.createElement(S.z,{type:"submit",startIcon:e.createElement(D.Z,null)},f({id:(0,g.O)("pages.SettingsPage.Button.save"),defaultMessage:"Save"})))}),e.createElement(A.D,null,e.createElement(x.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(C.K,{spacing:4},e.createElement(L.Z,{variant:"delta",as:"h2"},f({id:"global.settings",defaultMessage:"Settings"})),e.createElement(i.r,{gap:4},e.createElement(d.P,{col:6,s:12},e.createElement(u.s,{name:"restrictedAccess",label:f({id:(0,g.O)("pages.SettingsPage.toggle.label"),defaultMessage:"Restricted Access"}),hint:f({id:(0,g.O)("pages.SettingsPage.toggle.hint"),defaultMessage:"Make the documentation endpoint private"}),checked:Z.restrictedAccess,onChange:()=>{Z.restrictedAccess===!0&&(F("password","",!1),N("password",!1,!1)),F("restrictedAccess",!Z.restrictedAccess,!1)},onLabel:"On",offLabel:"Off"})),Z.restrictedAccess&&e.createElement(d.P,{col:6,s:12},e.createElement(a.o,{label:f({id:"global.password",defaultMessage:"Password"}),name:"password",placeholder:"**********",type:U?"text":"password",value:Z.password,onChange:z,error:$.password?f({id:$.password,defaultMessage:"Invalid value"}):null,endAction:e.createElement(s,{onClick:V=>{V.stopPropagation(),H(G=>!G)},label:f(U?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"})},U?e.createElement(c.default,null):e.createElement(O.default,null))})))))))))}},4733:(B,y,t)=>{t.d(y,{Z:()=>L});var e=t(23724),h=t(68547),l=t(49950),p=(u,a,i)=>new Promise((d,c)=>{var O=g=>{try{P(i.next(g))}catch(v){c(v)}},D=g=>{try{P(i.throw(g))}catch(v){c(v)}},P=g=>g.done?d(g.value):Promise.resolve(g.value).then(O,D);P((i=i.apply(u,a)).next())});const m=({prefix:u,version:a})=>(0,h.request)(`${u}/deleteDoc/${a}`,{method:"DELETE"}),A=u=>p(void 0,null,function*(){try{return yield(0,h.request)(`/${l.Z}/getInfos`,{method:"GET"})}catch(a){return u({type:"warning",message:{id:"notification.error"}}),null}}),T=({prefix:u,version:a})=>(0,h.request)(`${u}/regenerateDoc`,{method:"POST",body:{version:a}}),S=({prefix:u,body:a})=>(0,h.request)(`${u}/updateSettings`,{method:"PUT",body:a});var x=t(798);const L=()=>{const u=(0,e.useQueryClient)(),a=(0,h.useNotification)(),{isLoading:i,data:d}=(0,e.useQuery)("get-documentation",()=>A(a)),c=v=>{a({type:"warning",message:v.response.payload.message})},O=(v,M)=>{u.invalidateQueries("get-documentation"),a({type:v,message:{id:(0,x.Z)(M)}})},D=(0,e.useMutation)(m,{onSuccess:()=>O("info","notification.delete.success"),onError:v=>c(v)}),P=(0,e.useMutation)(S,{onSuccess:()=>O("success","notification.update.success"),onError:c}),g=(0,e.useMutation)(T,{onSuccess:()=>O("info","notification.generate.success"),onError:v=>c(v)});return{data:d,isLoading:i,deleteMutation:D,submitMutation:P,regenerateDocMutation:g}}},798:(B,y,t)=>{t.d(y,{Z:()=>l});var e=t(49950);const l=p=>`${e.Z}.${p}`},93742:(B,y,t)=>{t.d(y,{O:()=>e.Z});var e=t(798)},49066:(B,y,t)=>{t.d(y,{D:()=>p});var e=t(67294),h=t(45697),l=t(35961);const p=({children:m})=>e.createElement(l.x,{paddingLeft:10,paddingRight:10},m);p.propTypes={children:h.node.isRequired}},67838:(B,y,t)=>{t.d(y,{T:()=>g});var e=t(67294),h=t(27821),l=t(45697),p=t(72735),m=t(35961),A=t(46273);const T=n=>{const o=(0,e.useRef)(null),[s,r]=(0,e.useState)(!0),E=([b])=>{r(b.isIntersecting)};return(0,e.useEffect)(()=>{const b=o.current,R=new IntersectionObserver(E,n);return b&&R.observe(o.current),()=>{b&&R.disconnect()}},[o,n]),[o,s]},S=(n,o)=>{(0,e.useLayoutEffect)(()=>{const s=new ResizeObserver(o);return Array.isArray(n)?n.map(r=>{r.current&&s.observe(r.current)}):n.current&&s.observe(n.current),()=>{s.disconnect()}},[])};var x=Object.defineProperty,C=Object.defineProperties,L=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,d=(n,o,s)=>o in n?x(n,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[o]=s,c=(n,o)=>{for(var s in o||(o={}))a.call(o,s)&&d(n,s,o[s]);if(u)for(var s of u(o))i.call(o,s)&&d(n,s,o[s]);return n},O=(n,o)=>C(n,L(o)),D=(n,o)=>{var s={};for(var r in n)a.call(n,r)&&o.indexOf(r)<0&&(s[r]=n[r]);if(n!=null&&u)for(var r of u(n))o.indexOf(r)<0&&i.call(n,r)&&(s[r]=n[r]);return s};const P=()=>{const n=(0,e.useRef)(null),[o,s]=(0,e.useState)(null),[r,E]=T({root:null,rootMargin:"0px",threshold:0});return S(r,()=>{r.current&&s(r.current.getBoundingClientRect())}),(0,e.useEffect)(()=>{n.current&&s(n.current.getBoundingClientRect())},[n]),{containerRef:r,isVisible:E,baseHeaderLayoutRef:n,headerSize:o}},g=n=>{const{containerRef:o,isVisible:s,baseHeaderLayoutRef:r,headerSize:E}=P();return e.createElement(e.Fragment,null,e.createElement("div",{style:{height:E==null?void 0:E.height},ref:o},s&&e.createElement(M,c({ref:r},n))),!s&&e.createElement(M,O(c({},n),{sticky:!0,width:E==null?void 0:E.width})))};g.displayName="HeaderLayout";const v=(0,h.default)(m.x)`
  position: fixed;
  top: 0;
  right: 0;
  width: ${n=>n.width}px;
  z-index: 4;
  box-shadow: ${({theme:n})=>n.shadows.tableShadow};
`,M=e.forwardRef((n,o)=>{var s=n,{navigationAction:r,primaryAction:E,secondaryAction:b,subtitle:R,title:j,sticky:f,width:I}=s,w=D(s,["navigationAction","primaryAction","secondaryAction","subtitle","title","sticky","width"]);const W=typeof R=="string";return f?e.createElement(v,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,background:"neutral0",width:I,"data-strapi-header-sticky":!0},e.createElement(A.k,{justifyContent:"space-between"},e.createElement(A.k,null,r&&e.createElement(m.x,{paddingRight:3},r),e.createElement(m.x,null,e.createElement(p.Z,c({variant:"beta",as:"h1"},w),j),W?e.createElement(p.Z,{variant:"pi",textColor:"neutral600"},R):R),b?e.createElement(m.x,{paddingLeft:4},b):null),e.createElement(A.k,null,E?e.createElement(m.x,{paddingLeft:2},E):void 0))):e.createElement(m.x,{ref:o,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:r?6:8,background:"neutral100","data-strapi-header":!0},r?e.createElement(m.x,{paddingBottom:2},r):null,e.createElement(A.k,{justifyContent:"space-between"},e.createElement(A.k,null,e.createElement(p.Z,c({as:"h1",variant:"alpha"},w),j),b?e.createElement(m.x,{paddingLeft:4},b):null),E),W?e.createElement(p.Z,{variant:"epsilon",textColor:"neutral600",as:"p"},R):R)});M.displayName="BaseHeaderLayout",M.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0,sticky:!1,width:void 0},M.propTypes={navigationAction:l.node,primaryAction:l.node,secondaryAction:l.node,sticky:l.bool,subtitle:l.oneOfType([l.string,l.node]),title:l.string.isRequired,width:l.number},g.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0},g.propTypes={navigationAction:l.node,primaryAction:l.node,secondaryAction:l.node,subtitle:l.oneOfType([l.string,l.node]),title:l.string.isRequired}},185:(B,y,t)=>{t.d(y,{o:()=>u});var e=t(67294),h=t(45697),l=t(27821),p=Object.defineProperty,m=Object.getOwnPropertySymbols,A=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,S=(a,i,d)=>i in a?p(a,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):a[i]=d,x=(a,i)=>{for(var d in i||(i={}))A.call(i,d)&&S(a,d,i[d]);if(m)for(var d of m(i))T.call(i,d)&&S(a,d,i[d]);return a},C=(a,i)=>{var d={};for(var c in a)A.call(a,c)&&i.indexOf(c)<0&&(d[c]=a[c]);if(a!=null&&m)for(var c of m(a))i.indexOf(c)<0&&T.call(a,c)&&(d[c]=a[c]);return d};const L=l.default.main`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,u=a=>{var i=a,{labelledBy:d}=i,c=C(i,["labelledBy"]);const O=d||"main-content-title";return e.createElement(L,x({"aria-labelledby":O,id:"main-content",tabIndex:-1},c))};u.defaultProps={labelledBy:void 0},u.propTypes={labelledBy:h.string}}}]);
